<article class="row">
<section class="display-question col-md-6">
  <%= render "question_display" %>
  <!-- ********************************************** -->
  <%# Create A Like  %>
  <%= render "like_unlike" %>
  <!-- ********************************************** -->
  <%# Favourite a Question %>
  <!-- ********************************************** -->
  <%= render "favourite_unfavourite" %>
  <!-- ********************************************** -->
  <%# Edit or Destroy a Question %>
  <!-- ********************************************** -->
  <%= render "edit_or_destroy_question" %>
</section>

<!-- CREATE ANSWERS -->
<section class="create-answer col-md-5 col-md-offset-1">
<h4 class="emo-ans"><%= Emoji.find_by_alias("bulb").raw %></h4>

  <%# @answer.errors.full_messages.join(", ") %>
  <% if @answer.errors.any? %>
  <ul>
    <% @answer.errors.full_messages.each do |error_msg| %>
      <li style = "color: red"><%= error_msg %></li>
    <% end %>
  </ul>
  <% end %>
  <h5>Create an Answer:</h5>
    <%= form_for [@question, @answer] do |f| %>
      <div class = "form-group">
        <%# f.label :body %>
        <%= f.text_area :body, class: "form-control" %>
      </div>
      <div class = "form-group">
        <%= f.submit "Answer", class: "btn btn-primary-outline btn-block" %>
      </div>
    <% end %>
</section>
</article>
<!-- LIST ANSWERS -->
<article class="row">
  <hr>
  <section class="list-answers col-md-6 col-md-offset-3">
    <h1 class = "text-lg-center title"><strong>Answers:</strong></h1>
    <% @question.answers.each do |ans| %>
      <p><%= ans.body %></p>
      <p class = "text-muted">(answer submitted by <%= ans.user_full_name %>)</p>
      <section class="manageables">
        <% if can? :edit, ans %>
          <p><%= link_to "Edit", edit_answer_path(ans) %></p>
        <% end %>

        <% if can? :destroy, ans %>
          <%= link_to "Delete", [@question, ans],
                       method: :delete,
                       data: { confirm: "Are you sure?!" } %>
        <% end %>
      </section>
      <hr>
    <% end %>
  </section>
</article>

<%# pass an array of parent resource and child resource to the form for. This is a better approach for creating nested resources. Works with both new and edit situations. So if an answer is not persisted, it will send POST request to question_answer_path and otherwise it will send PATCH request to _question_answer_path(@question, @answer) %>

<%# we could use this form after overiding the URL parameter - the downside is that it won't work for 'edit' situations. Only works in the create action. So it's not reusable if we decide to be able to edit an answer.  %>
<%# form_for @answer, url: question_answers_path(@question) do |f|  %>
<%#  %>
<%# end %>
